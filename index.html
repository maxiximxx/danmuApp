<!DOCTYPE html>
<html lang="utf-8">
<head>
	<meta charset="UTF-8">
	<title>弹幕APP</title>
	<style type="text/css">
		body{font-family: 'microsoft yahei'}
		.danmu{border: 1px solid #ccc;height: 756px;width:1344px;margin: 0 auto;overflow: hidden;position: relative;  -webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor: default;}
		.danmu video{width: 100%;height: 100%;}
		.ui{text-align: center;margin-top: 20px;}
		.ui input{width: 480px;height: 32px;}
		.ui #send,.ui #clear{width: 150px;height: 32px;margin-top: 10px;cursor: pointer;background-color: #fff;}
		#send{border:1px solid orange;color: orange;margin-right: 20px;}
		#clear{border:1px solid gray;color: gray;}
	</style>
</head>
<body>
	<div class="danmu">
		<video src="MBT系统_虚拟现实工厂.mp4" controls="controls">
		
		</video>
	</div>
	<div class="ui">
		<input id="user-input" type="text" placeholder="说点什么？">
		<br>
		<input id="send" type="button" name="" value="发 送">
		<input id="clear" type="button" name="" value="清 屏">
	</div>
</body>
<script type="text/javascript" src="jquery.1.10.2.js"></script>
<script type="text/javascript">
	$(document).ready(function() {

function rot13(arr) { // LBH QVQ VG!
  var str = arr.split("");
  for(var i=0;i<str.length;i++){
    if(str[i]!==" "){
     var j = str[i].charCodeAt()+13;
     if(j>90)
     {
       j=j-90+64;
     }
    str.splice(i,1,String.fromCharCode(j));
    }
    else{
     str = str;
    } 
   
  }
  return str.join("");
}

// Change the inputs below to test
rot13("SERR PBQR PNZC");



function truncate(str, num) {
  // Clear out that junk in your trunk
  if(str.length>6&&num>str.length-3){
    str = str;
  }
  else if(num>3 && num<=str.length-3)
    {
      str = str.slice(0,num-3);
      str += "...";
    }
  else{
    str = str.slice(0,num);
    str += "...";
  }
  return str;
}

// alert(truncate("A-tisket a-tasket A green and yellow basket", "A-tisket a-tasket A green and yellow basket".length));


		function largestOfFour(arr) {
  // You can do this!
  var newarr = [];
  for(var i=0;i<arr.length;i++){
    var num = arr[i][0];
    for(var j =0;j<arr[i].length;j++){
      if(num<arr[i][j+1])
        num = arr[i][j+1];
    }
    newarr.push(num);
  }
  return arr;
}

largestOfFour([[4, 5, 1, 3], [13, 27, 18, 26], [32, 35, 37, 39], [1000, 1001, 857, 1]]);
		 // alert("hello world".replace(/(^|\s+)\w/g,function(s){
   //          return s.toUpperCase();
   //       }))

function titleCase(str) {
  str = str.toLowerCase();
  var arr = str.split(" ");
  for(var i = 0; i < arr.length; i++){
    arr[i].replace(arr[i][0],arr[i][0].toUpperCase());
  }
  str = arr.join(" ");
  return str;
}

titleCase("I'm a little tea pot");

function findLongestWord(str) {
  
  var arr = str.split(" ");
  var j = arr[0].length;
  for (var i = 0 ; i < arr.length-1; i++){
    if(j < arr[i+1].length)
      j = arr[i+1].length;
  }
  
  return j;
}

findLongestWord("The quick brown fox jumped over the lazy dog");

		function factorialize(num) {
			if(num == 0){
				num = 1;
			}


			else if(num > 0){
				var jc = 1;
				while(num > 0){
					jc =jc * num ;
					num--;
				}
				num = jc;
			}

			return num;
		}

		console.log(factorialize(5));


		$("#send").click(function() {	
			var user_input = $("#user-input").val();
			$("#user-input").val("");
			var $span = $("<span class='content'>"+user_input+"</span>");		
			var ran = Math.random()*476;
			var r = parseInt(Math.random()*255);
			var g = parseInt(Math.random()*255);
			var b = parseInt(Math.random()*255);		
			$span.offset({top:ran});
			$span.css("color","rgb("+r+","+g+","+b+")");
			//var left_width = 1000 + $span.width();
			//console.log($span.width());
			$(".danmu").append($span);
			$(".danmu .content").css({
				"width":"100%",
				"position":"absolute",
				"left":"100%",
				"height":"24px",
				"line-height":"24px",
				"font-size":"24px"
			}).animate({
				left: "-100%"},
				20000,function(){
					$(this).remove();
				});		
		});

		$("#clear").click(function(){
			$(".danmu").html("");
		})

		$('body').keydown(function (event) {
			if (event.keyCode == 13)   
				$('#send').click();  
		});

	});
</script>
</html>